#!/usr/bin/env bash

# Get the current sink
CURR_SINK=$(pactl get-default-sink)

# List available sinks with wofi
# Select sink to set as default
SELECTED=$(pactl list sinks | awk '/Name/ { print $2 }' | xargs -n1 echo | wofi -d -p " Select audio output:")


# Exit if no sink is selected/no input
if [[ -z "$SELECTED" ]]; then
  notify-send --hint=int:transient:1 "No audio output selected" "No changes made. Current default output is\n$CURR_SINK"
  exit 0
fi

# Exit if sink is already selected
if [[ "$SELECTED" == "$CURR_SINK" ]]; then
  notify-send --hint=int:transient:1 "Selected already active output" "No changes made. Current default output is\n$CURR_SINK"
  exit 0
fi

pactl set-default-sink $SELECTED
notify-send --hint=int:transient:1 "Audio output changed" "Changed audio output to\n$SELECTED"
